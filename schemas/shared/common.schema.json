{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://salvageunion.com/schemas/shared/common.schema.json",
  "title": "Salvage Union Common Definitions",
  "description": "Shared common type definitions for Salvage Union game data",
  "definitions": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the entry"
    },
    "activationCost": {
      "description": "Cost in ability points to activate an ability",
      "oneOf": [
        {
          "type": "integer",
          "minimum": 0
        },
        {
          "type": "string",
          "const": "Variable"
        }
      ]
    },
    "damage": {
      "description": "Damage dealt by an attack or ability",
      "oneOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "type",
            "amount"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "HP",
                "SP"
              ],
              "description": "Type of damage (Hit Points or Structure Points)"
            },
            "amount": {
              "type": "integer",
              "minimum": 0,
              "description": "Amount of damage dealt"
            }
          }
        },
        {
          "type": "string",
          "enum": [
            "2d20",
            "X SP"
          ],
          "description": "Variable damage formula"
        }
      ]
    },
    "traits": {
      "type": "array",
      "description": "Special traits and properties of items, systems, or abilities",
      "items": {
        "oneOf": [
          {
            "type": "object",
            "description": "Trait with a numeric value",
            "additionalProperties": false,
            "required": [
              "type",
              "amount"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "uses",
                  "explosive",
                  "burn",
                  "hot",
                  "multi-attack",
                  "personnel capacity"
                ],
                "description": "Type of trait that requires a numeric value"
              },
              "amount": {
                "type": "integer",
                "minimum": 0,
                "description": "Numeric value for the trait"
              }
            }
          },
          {
            "type": "object",
            "description": "Trait without a numeric value",
            "additionalProperties": false,
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "description": "Type of trait that doesn't require a numeric value",
                "enum": [
                  "pilot equipment",
                  "hacking",
                  "melee",
                  "armor",
                  "rigging",
                  "ballistic",
                  "unwieldy",
                  "silent",
                  "communicator",
                  "salvaging",
                  "energy",
                  "heavy",
                  "shield",
                  "hover",
                  "anti-organic",
                  "overheat",
                  "climbing",
                  "missile",
                  "deadly",
                  "deadly (creatures only)",
                  "flashy",
                  "scanner",
                  "heat spike",
                  "optics",
                  "targeter",
                  "hot (x)",
                  "guided",
                  "jamming",
                  "pinning",
                  "escape",
                  "wield",
                  "anti-shielding",
                  "ion",
                  "amphibious",
                  "explosive (1d20)",
                  "heat hpike",
                  "hot (1d20)",
                  "wheeled",
                  "meld infection",
                  "irradiated",
                  "fast",
                  "immobile",
                  "poison",
                  "burrower",
                  "fly",
                  "load"
                ]
              }
            }
          }
        ]
      }
    },
    "rollTable": {
      "description": "Roll table for random outcomes based on d20 rolls",
      "oneOf": [
        {
          "type": "object",
          "description": "Standard roll table with 5 outcome ranges",
          "additionalProperties": false,
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "const": "standard"
            },
            "1": {
              "type": "string",
              "description": "Critical failure outcome"
            },
            "20": {
              "type": "string",
              "description": "Critical success outcome"
            },
            "11-19": {
              "type": "string",
              "description": "High success outcome"
            },
            "6-10": {
              "type": "string",
              "description": "Moderate outcome"
            },
            "2-5": {
              "type": "string",
              "description": "Low outcome"
            }
          }
        },
        {
          "type": "object",
          "description": "Alternative standard roll table with different ranges",
          "additionalProperties": false,
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "const": "alternate"
            },
            "1": {
              "type": "string",
              "description": "Critical failure outcome"
            },
            "19-20": {
              "type": "string",
              "description": "Critical success outcome"
            },
            "11-18": {
              "type": "string",
              "description": "High success outcome"
            },
            "6-10": {
              "type": "string",
              "description": "Moderate outcome"
            },
            "2-5": {
              "type": "string",
              "description": "Low outcome"
            }
          }
        },
        {
          "type": "object",
          "description": "Flat roll table with individual outcomes for each numeric result",
          "additionalProperties": false,
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "const": "flat"
            },
            "1": {
              "type": "string"
            },
            "2": {
              "type": "string"
            },
            "3": {
              "type": "string"
            },
            "4": {
              "type": "string"
            },
            "5": {
              "type": "string"
            },
            "6": {
              "type": "string"
            },
            "7": {
              "type": "string"
            },
            "8": {
              "type": "string"
            },
            "9": {
              "type": "string"
            },
            "10": {
              "type": "string"
            },
            "11": {
              "type": "string"
            },
            "12": {
              "type": "string"
            },
            "13": {
              "type": "string"
            },
            "14": {
              "type": "string"
            },
            "15": {
              "type": "string"
            },
            "16": {
              "type": "string"
            },
            "17": {
              "type": "string"
            },
            "18": {
              "type": "string"
            },
            "19": {
              "type": "string"
            },
            "20": {
              "type": "string"
            }
          }
        }
      ]
    },
    "entry": {
      "type": "object",
      "description": "Basic entry with name, description, source, and page reference",
      "additionalProperties": false,
      "required": [
        "id",
        "name",
        "source",
        "page"
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/id"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Name of the entry"
        },
        "description": {
          "type": "string",
          "description": "Description of the entry"
        },
        "source": {
          "$ref": "enums.schema.json#/definitions/source"
        },
        "page": {
          "type": "integer",
          "minimum": 1,
          "description": "Page number in the source book"
        }
      }
    },
    "techLevel": {
      "type": "integer",
      "minimum": 0,
      "description": "Technology level of the item or entity"
    },
    "salvageValue": {
      "type": "integer",
      "minimum": 0,
      "description": "Salvage value in credits"
    },
    "hitPoints": {
      "type": "integer",
      "minimum": 1,
      "description": "Hit points for creatures and personnel"
    },
    "structurePoints": {
      "type": "integer",
      "minimum": 1,
      "description": "Structure points for mechs, vehicles, and titans"
    }
  }
}
